{% extends "layout.html" %}

{% block content %}
<div id="c2-root">
  <header class="topbar">
    <div class="brand">
      <span>Operational Console</span>
      <h1>C2 Walaris</h1>
    </div>
    <div class="status-pill">
      <span class="status-dot" id="api-dot"></span>
      <span id="api-status">API: booting</span>
      <span class="status-sep">|</span>
      <span id="stream-status">SSE: offline</span>
      <span class="status-sep">|</span>
      <span id="ws-status">WS: offline</span>
      <span class="status-sep">|</span>
      {{ service_name }} · {{ environment | upper }}
    </div>
  </header>

  <div class="c2-body">
    <aside class="dock left" id="dock-left" data-state="open">
      <button class="dock-toggle" data-dock-toggle="left" aria-label="Toggle left dock">≡</button>
      <div class="dock-panel">
        <section class="panel-section">
          <div id="mission-feed-panel" data-partial="/partials/mission-feed">
            {% include "partials/mission_feed.html" %}
          </div>
        </section>
        <section class="panel-section">
          <div id="incident-panel" data-partial="/partials/incidents">
            {% include "partials/incidents.html" %}
          </div>
        </section>
        <section class="panel-section">
          <div id="asset-panel" data-partial="/partials/assets">
            {% include "partials/assets.html" %}
          </div>
        </section>
        <section class="panel-section">
          <h2>Globe Layers</h2>
          <div class="panel-actions">
            <button data-globe-mode="day" data-active="true">Day</button>
            <button data-globe-mode="night">Night</button>
            <button data-globe-toggle="clouds" aria-pressed="true">Clouds</button>
            <button data-globe-toggle="axes" aria-pressed="true">Axes</button>
          </div>
          <div class="meta">Toggle globe lighting and debug layers.</div>
        </section>
        <section class="panel-section">
          <h2>Overlays</h2>
          <div class="panel-actions">
            <button data-layer-toggle="pins">Pins</button>
          </div>
          <div class="meta">Toggle overlays anchored to tracked entities.</div>
        </section>
      </div>
    </aside>

    <main class="board" id="board">
      <div class="layer-stack" id="layer-stack">
        <canvas id="map-3d" data-layer="map-3d"></canvas>
        <canvas id="map-2d" data-layer="map-2d"></canvas>
        <div class="dom-layer" id="pin-layer" data-layer="pins"></div>
      </div>
    </main>

    <aside class="dock right" id="dock-right" data-state="open">
      <button class="dock-toggle" data-dock-toggle="right" aria-label="Toggle right dock">≡</button>
      <div class="dock-panel">
        <section class="panel-section">
          <h2>Inspector</h2>
          <p class="meta">Select an entity to view assignments, posture, and comms.</p>
        </section>
        <section class="panel-section">
          <h2>Alerts</h2>
          <p class="meta">Escalations and warnings appear here.</p>
        </section>
        <section class="panel-section">
          <h2>Overlays</h2>
          <p class="meta">Toggle overlays tied to missions, units, and tasks.</p>
        </section>
      </div>
    </aside>
  </div>

  <div class="bottom-bar">
    <div class="footer-stats">
      <div class="hud-card">
        <div class="hud-title">Runtime</div>
        <div id="runtime-stats">Entities: 0 · FPS: --</div>
      </div>
      <div class="hud-card">
        <div class="hud-title">View</div>
        <div id="camera-stats">View: Globe · Dist: --</div>
      </div>
    </div>
    <div class="osm-attrib">Earth textures: Solar System Scope</div>
    <div class="panel-actions">
      <button>Pin View</button>
      <button>Share Scene</button>
      <button>Export Brief</button>
    </div>
  </div>
</div>
{% endblock content %}
