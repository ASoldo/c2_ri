{% extends "layout.html" %}

{% block content %}
<div id="c2-root">
  <header class="topbar">
    <div class="brand">
      <span>Operational Console</span>
      <h1>C2 Walaris</h1>
    </div>
    <div class="status-pill">
      <span class="status-dot" id="api-dot"></span>
      <span id="api-status">API: booting</span>
      <span class="status-sep">|</span>
      <span id="stream-status">SSE: offline</span>
      <span class="status-sep">|</span>
      <span id="ws-status">WS: offline</span>
      <span class="status-sep">|</span>
      <span id="runtime-stats">Entities: 0 · FPS: --</span>
      <span class="status-sep">|</span>
      <span id="camera-stats">View: Globe · Dist: --</span>
      <span class="status-sep">|</span>
      <span id="tile-status">Tiles: --</span>
      <span class="status-sep">|</span>
      {{ service_name }} · {{ environment | upper }}
    </div>
  </header>

  <div class="c2-body">
    <aside class="dock left" id="dock-left" data-state="closed">
      <button class="dock-toggle" data-dock-toggle="left" aria-label="Toggle left dock">≡</button>
      <div class="dock-panel">
        <section class="panel-section">
          <div id="mission-feed-panel" data-partial="/partials/mission-feed">
            {% include "partials/mission_feed.html" %}
          </div>
        </section>
        <section class="panel-section">
          <div id="incident-panel" data-partial="/partials/incidents">
            {% include "partials/incidents.html" %}
          </div>
        </section>
        <section class="panel-section">
          <div id="asset-panel" data-partial="/partials/assets">
            {% include "partials/assets.html" %}
          </div>
        </section>
        <section class="panel-section">
          <h2>Globe Layers</h2>
          <div class="panel-field">
            <label for="tile-provider">Tile provider</label>
            <select id="tile-provider"></select>
          </div>
          <div class="panel-actions">
            <button data-globe-mode="day" data-active="true">Day</button>
            <button data-globe-mode="night">Night</button>
            <button data-globe-toggle="axes" aria-pressed="true">Axes</button>
            <button data-globe-toggle="grid" aria-pressed="true">Grid</button>
          </div>
          <div class="meta">Toggle globe lighting and debug layers.</div>
        </section>
        <section class="panel-section" id="weather-panel">
          <h2>Weather Overlay</h2>
          <div class="panel-field">
            <label for="weather-field">Data layer</label>
            <select id="weather-field"></select>
          </div>
          <div class="panel-actions">
            <button data-weather-toggle="overlay" aria-pressed="false">Weather</button>
          </div>
          <div class="meta">NASA GIBS tiles layered above base maps.</div>
        </section>
        <section class="panel-section" id="flight-panel">
          <h2>Air Traffic</h2>
          <div class="panel-actions">
            <button data-flight-toggle="overlay" aria-pressed="false">Flights</button>
          </div>
          <div class="meta" id="flight-provider-label">Live flight tracks via OpenSky.</div>
        </section>
        <section class="panel-section" id="satellite-panel">
          <h2>Satellites</h2>
          <div class="panel-actions">
            <button data-satellite-toggle="overlay" aria-pressed="false">Satellites</button>
          </div>
          <div class="meta" id="satellite-provider-label">Live satellite tracks via CelesTrak.</div>
        </section>
        <section class="panel-section" id="ship-panel">
          <h2>Maritime</h2>
          <div class="panel-actions">
            <button data-ship-toggle="overlay" aria-pressed="false">Ships</button>
          </div>
          <div class="meta" id="ship-provider-label">Live vessel tracks via ArcGIS.</div>
        </section>
        <section class="panel-section">
          <h2>Overlays</h2>
          <div class="panel-actions">
            <button data-layer-toggle="pins">Pins</button>
          </div>
          <div class="meta">Toggle overlays anchored to tracked entities.</div>
        </section>
      </div>
    </aside>

    <main class="board" id="board">
      <div class="layer-stack" id="layer-stack">
        <canvas id="map-3d" data-layer="map-3d"></canvas>
        <canvas id="map-2d" data-layer="map-2d"></canvas>
        <div class="dom-layer" id="pin-layer" data-layer="pins"></div>
        <div class="dom-layer flight-layer" id="flight-layer" data-layer="flights"></div>
        <div class="dom-layer satellite-layer" id="satellite-layer" data-layer="satellites"></div>
        <div class="dom-layer ship-layer" id="ship-layer" data-layer="ships"></div>
        <div class="edge-layer" id="edge-layer" data-layer="edges"></div>
      </div>
      <div class="crosshair" id="crosshair" aria-hidden="true"></div>
    </main>

    <aside class="dock right" id="dock-right" data-state="closed">
      <button class="dock-toggle" data-dock-toggle="right" aria-label="Toggle right dock">≡</button>
      <div class="dock-panel">
        <section class="panel-section">
          <h2>Inspector</h2>
          <p class="meta">Select an entity to view assignments, posture, and comms.</p>
        </section>
        <section class="panel-section">
          <h2>Alerts</h2>
          <p class="meta">Escalations and warnings appear here.</p>
        </section>
        <section class="panel-section">
          <h2>Overlays</h2>
          <p class="meta">Toggle overlays tied to missions, units, and tasks.</p>
        </section>
      </div>
    </aside>
  </div>

</div>
{% endblock content %}
